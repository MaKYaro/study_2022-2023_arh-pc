---
## Front matter
title: "Отчет по лабораторной работе № 8"
subtitle: "дисциплина: Архитектура компьютера"
author: "Клюкин Михаил Александрович"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Изучить команды условного и безусловного переходов. Приобрести навыки написания программ с использованием переходов. Познакомиться с назначением и структурой файла листинга. 

# Задание


# Теоретическое введение

Для реализации ветвлений в ассемблере используются команды перехода:

* условный переход -- выполняется переход в определенную точку программы в зависимости от результата проверки условия.

* безусловный переход -- передача управления определенной части программы без каких-либо условий.

## Команды безусловного перехода

Безусловный переход выполняется с помощью команды jmp:
```
jmp <адрес_перехода>
```

Адрес перехода может быть меткой, адресом области памяти, в которую предварительно помещен указатель перехода, или именем регистра (переход произойдет по адресу, хранящемся в этом регистре).

## Команды условного перехода

Команды условного перехода вычисляют условие перехода, анализируя флаги из регистра флагов.

### Регистр флагов

Флаг -- это бит, который принимает значения 0 или 1.

Флаги работают независимо друг от друга. Они помещены в один регистр лишь для удобства.

Флаги состояний CF, PF, AF, ZF, SF, OF отражают результаты выполнения арифметических операций.

### Описание инструкции cmp

Инструкция cmp позволяет сравнивать операнды и выставлять флаги в зависимости от результата сравнения:
```
cmp <операнд_1>, <операнд_2>
```

Команда выполняет вычитание операнда 1 из операнда 2. В результате выставляются флаги.

### Описание команд условного перехода

Команда условного перехода имеет вид:
```
j<мнемоника перехода> label
```

Мнемоника переходов связана со значением анализируемых флагов или со способом формирования этих флагов.

## Файл листинга и его структура

Листинг -- это один из выходних файлов, создаваемых транслятором. Он имеет текстовый вид и нужен при отладке программы.

Структура листинга:

* номер строки -- номер строки файла листинга
* адрес -- смещения машинного кода от начала текущего сегмента
* машинный код -- ассемблированная исходная строка в виде шестнадцатеричной последовательности
* исходный текст программы -- строка исходной программы вместе с комментариями

# Выполнение лабораторной работы

## Реализация переходов в NASM

Создали каталог для программ лабораторной работы, перешли в него и создали файл lab8-1.asm. Ввели в файл lab8-1.asm текст следующей программы:
```
%include
'in_out.asm'
; подключение внешнего файла
SECTION .data
msg1:DB 'Сообщение № 1',0
msg2:DB 'Сообщение № 2',0
msg3:DB 'Сообщение № 3',0
SECTION .text
GLOBAL _start
_start:
jmp _label2
_label1:
mov eax, msg1 ; Вывод на экран строки
call sprintLF ; 'Сообщение № 1'
_label2:
mov eax, msg2 ; Вывод на экран строки
call sprintLF ; 'Сообщение № 2'
_label3:
mov eax, msg3 ; Вывод на экран строки
call sprintLF ; 'Сообщение № 3'
_end:
call quit ; вызов подпрограммы завершения
```

Создали исполняемый файл и запустили его.

## Изучение структуры файла листинга

Создали каталог для работы и перешли в него. Создали файл lab7-1.asm (Рис. [-@fig:fig1]).

![Создание рабочего каталога и файла lab7-1.asm](./image/Screenshot from 2022-11-23 13-00-01.png){ #fig:fig1 width=70% }



# Выполнение заданий для самостоятельной работы


# Контрольные вопросы для самопроверки

1. Для чего нужен файл листинга NASM? В чём его отличие от текста программы?
2. Каков формат файла листинга NASM? Из каких частей он состоит?
3. Как в программах на ассемблере можно выполнить ветвление?
4. Какие существуют команды безусловного и условных переходов в языке ассемблера?
5. Опишите работу команды сравнения cmp.
6. Каков синтаксис команд условного перехода?
7. Приведите пример использования команды сравнения и команд условного перехода.
8. Какие флаги анализируют команды безусловного перехода?

# Выводы

Изучили команды условного и безусловного переходов. Приобрели навыки написания программ с использованием переходов. Познакомились с назначением и структурой файлов листинга.

# Список литературы{.unnumbered}

1. Демидова А. В. Лабораторная работа №8. Команды безусловного и условного переходов в Nasm. Программирование ветвлений – Методическое пособие
